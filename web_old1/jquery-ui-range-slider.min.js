!function($){return $.widget("uiExtension.rangeSlider",$.ui.slider,{_create:function(){var self;return self=this,self.options.values=[],self.options.rangeValues=[],null==self.options.overlap&&(self.options.overlap=!0),null==self.options.rangeBarColor&&(self.options.rangeBarColor="#F5F5F5"),$(self.options.ranges).each(function(k,v){v=self._parseRangeValues(v),v.startValue===v.endValue&&(v.endValue=v.startValue+1),self.options.values.push(v.startValue),self.options.values.push(v.endValue),self.options.rangeValues.push(v),self.options.rangeValues.push(v),$(self.element).append('<div class="ui-slider-range ui-widget-header range-bg-'+v.id.toString()+'" style="left: '+(100*v.startValue/self.options.max).toString()+"%; width: "+100*(v.endValue-v.startValue)/self.options.max+"%; background: none repeat scroll 0% 0% "+v.color+';" ><div class="range-label"></div></div>')}),self._super()},_parseRangeValues:function(obj){var parsed;return parsed=$.extend(!0,{id:(new Date).getTime(),startValue:0,endValue:1,color:this.options.rangeBarColor},obj)},_createHandles:function(){var self;return self=this,self._super(),this.handles.each(function(index,handler){var range;return handler=$(handler),range=self.options.rangeValues[index],handler.addClass("range-handler-"+range.id),handler.data("id",range.id),handler.data("period",range),self.options.values[index]===range.startValue&&(handler.addClass("left"),handler.data("value",range.startValue)),self.options.values[index]===range.endValue?(handler.addClass("right"),handler.data("value",range.endValue)):void 0})},_checkLimit:function(index,changeValue){var closestLimit,handlers,leftLimit,result,rightLimit,self;if(null==changeValue&&(changeValue=!1),self=this,result=!0,handlers=self._getHandlers(index),rightLimit=handlers.rightHandler.position().left-handlers.rightHandler.outerWidth(),closestLimit=0,leftLimit=handlers.leftHandler.position().left+handlers.leftHandler.outerWidth(),handlers.currentHandler.position().left>rightLimit&&handlers.currentHandler.hasClass("left"))return changeValue===!0&&handlers.currentHandler.css("left",rightLimit),!1;if(handlers.currentHandler.position().left<leftLimit&&handlers.currentHandler.hasClass("right"))return changeValue===!0&&handlers.currentHandler.css("left",leftLimit),!1;if(null==self.options.overlap||self.options.overlap===!1){if(handlers.currentHandler.hasClass("right")&&null!=handlers.closestHandler&&handlers.closestHandler.length>0&&(closestLimit=handlers.closestHandler.position().left-handlers.closestHandler.outerWidth(),handlers.currentHandler.position().left>closestLimit))return changeValue===!0&&handlers.currentHandler.css("left",closestLimit),!1;if(handlers.currentHandler.hasClass("left")&&null!=handlers.closestHandler&&handlers.closestHandler.length>0&&(closestLimit=handlers.closestHandler.position().left+handlers.closestHandler.outerWidth(),handlers.currentHandler.position().left<closestLimit))return changeValue===!0&&handlers.currentHandler.css("left",closestLimit),!1}},_refreshInfoBars:function(){var self;return self=this,$(self.handles).each(function(k){return self._renderInfoBar({},k)})},_refresh:function(){return this._super(),this._refreshInfoBars()},_rageUiHash:function(event,index){var range,uiHash;return uiHash={},uiHash.handlers=this._getHandlers(index),uiHash.ranges=this.options.ranges,range=$.grep(this.options.ranges,function(value){return value.id.toString()===uiHash.handlers.currentHandler.data("id").toString()}),null!=range&&(range=range[0],range.startValue=uiHash.handlers.leftHandler.data("value"),range.endValue=uiHash.handlers.rightHandler.data("value"),uiHash.range=range),uiHash},_slide:function(event,index,newVal){var allow,handlers,self,ui,width;return self=this,allow=!0,handlers=self._getHandlers(index),handlers.currentHandler.data("value",self.options.values[index]),width=handlers.rightHandler.position().left-handlers.leftHandler.position().left,handlers.rangeBar.css("left",handlers.leftHandler.css("left")),handlers.rangeBar.css("width",width.toString()+"px"),ui=self._rageUiHash(event,index),self._checkLimit(index)===!1&&(allow=!1),allow===!1?!1:(allow=self._trigger("rangeSlide",event,ui),self._renderInfoBar(event,index),allow=this._super(event,index,newVal))},_stop:function(event,index){return this._checkLimit(index,!0),this._super(event,index)},_renderInfoBar:function(event,index){var self,text,ui;return self=this,text="",ui=self._rageUiHash(event,index),ui.label=$(".range-label",ui.handlers.rangeBar),$.isFunction(self.options.rangeLabel)?self._trigger("rangeLabel",event,ui):(text=ui.handlers.leftHandler.data("value").toString()+" -- "+ui.handlers.rightHandler.data("value").toString(),ui.label.empty().append(text))},_getHandlers:function(index){var handlerSelector,handlers,self;return handlers={},self=this,handlers.currentHandler=$(self.handles[index]),handlerSelector=".range-handler-"+handlers.currentHandler.data("id"),handlers.leftHandler=$(handlerSelector+".left:first",self.element),handlers.rightHandler=$(handlerSelector+".right:first",self.element),handlers.rangeBar=$(".range-bg-"+handlers.currentHandler.data("id"),self.element),handlers.currentHandler.hasClass("right")&&(handlers.closestHandler=handlers.currentHandler.next(".left:first")),handlers.currentHandler.hasClass("left")&&(handlers.closestHandler=handlers.currentHandler.prev(".right:first")),handlers}})}($);